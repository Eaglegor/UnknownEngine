<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Unknown Engine: UnknownEngine::Core::MessageUnpacker&lt; T &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Unknown Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d4/d8a/namespace_unknown_engine.html">UnknownEngine</a></li><li class="navelem"><a class="el" href="../../de/d37/namespace_unknown_engine_1_1_core.html">Core</a></li><li class="navelem"><a class="el" href="../../d3/da2/class_unknown_engine_1_1_core_1_1_message_unpacker.html">MessageUnpacker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../db/d33/class_unknown_engine_1_1_core_1_1_message_unpacker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">UnknownEngine::Core::MessageUnpacker&lt; T &gt; Class Template Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to convert from packed message to the concrete message class.  
 <a href="../../d3/da2/class_unknown_engine_1_1_core_1_1_message_unpacker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../da/d32/_message_packer_8h_source.html">MessagePacker.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a440bf6f073022bcd055a8b0bbe991f9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a440bf6f073022bcd055a8b0bbe991f9c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/da2/class_unknown_engine_1_1_core_1_1_message_unpacker.html#a440bf6f073022bcd055a8b0bbe991f9c">MessageUnpacker</a> ()</td></tr>
<tr class="memdesc:a440bf6f073022bcd055a8b0bbe991f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:a440bf6f073022bcd055a8b0bbe991f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295fff9208eb94a840ba6b85f068a113"><td class="memItemLeft" align="right" valign="top">virtual T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/da2/class_unknown_engine_1_1_core_1_1_message_unpacker.html#a295fff9208eb94a840ba6b85f068a113">unpackMessage</a> (const <a class="el" href="../../dd/d1e/class_unknown_engine_1_1_core_1_1_packed_message.html">PackedMessage</a> &amp;msg)=0  throw ( InvalidMessageFormatException )</td></tr>
<tr class="memdesc:a295fff9208eb94a840ba6b85f068a113"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts packed message to a concrete message class.  <a href="#a295fff9208eb94a840ba6b85f068a113">More...</a><br /></td></tr>
<tr class="separator:a295fff9208eb94a840ba6b85f068a113"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class UnknownEngine::Core::MessageUnpacker&lt; T &gt;</h3>

<p>Class to convert from packed message to the concrete message class. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Concrete message class</td></tr>
  </table>
  </dd>
</dl>
<h3>Concept</h3>
<p>Message dispatcher works with generic packed message containing some data having no compile time defined value types and names. Because we can't guarantee the correctness of manual packed message composing (there may be mistypes, incorrect values, copy-paste errors, missing mandatory fields etc.) we recommend to expose not just a message type but a concrete message class with 2 helper classes - message packer and message unpacker. The purpose of message packer is to convert a concrete message class (e.g. <a class="el" href="../../d7/daa/struct_unknown_engine_1_1_core_1_1_log_message.html" title="Log entry message. ">LogMessage</a>) to the packed message using the appropriate format. The pair of message packer - the message unpacker - will then perform the vice versa conversion checking the message format.</p>
<h3>Usage</h3>
<p>The user code works with compile-time checked message classes exposed in header files of subsystem. The message packer and message unpacker need to be provided by a subsystem when declaring a message. When the user code wants to send message it creates a message class instance (e.g. <a class="el" href="../../d7/daa/struct_unknown_engine_1_1_core_1_1_log_message.html" title="Log entry message. ">LogMessage</a>). Then it passes it to the message packer's packMessage() method and gets a <a class="el" href="../../dd/d1e/class_unknown_engine_1_1_core_1_1_packed_message.html" title="Generic message class to be sent over a message bus. ">PackedMessage</a> in the appropriate format. After that this message can be sent with message dispatcher. When a listener receives the message it calls a message unpacker's method <a class="el" href="../../d3/da2/class_unknown_engine_1_1_core_1_1_message_unpacker.html#a295fff9208eb94a840ba6b85f068a113" title="Converts packed message to a concrete message class. ">unpackMessage()</a> and gets back a concrete message class, which fields name and type is checked at compile-time. The rule is: <b>Don't try to compose packed messages manually: use packer/unpacker model</b>. This rule is useful due to the fact that sometimes we may change the format of packed message for performance boost. If we use packer/unpacker model we just rewrite some isolated converter classes and don't touch logic part of code.</p>
<h3>Notes</h3>
<p>There is no magic. User code must know which message it's handling and call an appropriate unpacker. Recommended behavior for message unpacker is to log a warning message when detecting unexpected fields and throw an exception when it can't find some mandatory fields. If user calls wrong unpacker it causes an undefined behaviour and depends on the unpacker's implementation. </p>

<p>Definition at line <a class="el" href="../../da/d32/_message_packer_8h_source.html#l00114">114</a> of file <a class="el" href="../../da/d32/_message_packer_8h_source.html">MessagePacker.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a295fff9208eb94a840ba6b85f068a113"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual T <a class="el" href="../../d3/da2/class_unknown_engine_1_1_core_1_1_message_unpacker.html">UnknownEngine::Core::MessageUnpacker</a>&lt; T &gt;::unpackMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d1e/class_unknown_engine_1_1_core_1_1_packed_message.html">PackedMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
        <tr>
          <td align="right">throw </td><td>(</td><td colspan="2">InvalidMessageFormatException</td>
        </tr>
        <tr>
          <td align="right"></td><td>)</td><td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts packed message to a concrete message class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>- Packed message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Concrete message class </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">InvalidMessageFormatException</td><td>- Is thrown if message can't be correctly processed (value limits violation, not all fields set, etc.) </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d0/dab/class_unknown_engine_1_1_core_1_1_log_message_unpacker.html#af9be9fa214d3138d2437a68d1c0a8a52">UnknownEngine::Core::LogMessageUnpacker</a>, <a class="el" href="../../dd/d05/class_unknown_engine_1_1_core_1_1_update_frame_message_unpacker.html#a3f46796f7a1d0580081b55db0cb6eae2">UnknownEngine::Core::UpdateFrameMessageUnpacker</a>, and <a class="el" href="../../df/de4/class_unknown_engine_1_1_graphics_1_1_create_render_window_message_unpacker.html#ae6da572b90f04d0ee8069ef80ae208ca">UnknownEngine::Graphics::CreateRenderWindowMessageUnpacker</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ComponentSystem/include/MessageSystem/<a class="el" href="../../da/d32/_message_packer_8h_source.html">MessagePacker.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 15 2014 18:35:53 for Unknown Engine by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
